"use strict";(self.webpackChunkaptos_docs=self.webpackChunkaptos_docs||[]).push([[4798],{43964:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>o,contentTitle:()=>d,default:()=>x,frontMatter:()=>c,metadata:()=>i,toc:()=>l});var s=t(63159),n=t(83581);const c={},d="Vector",i={id:"move/book/vector",title:"Vector",description:"vector is the only primitive collection type provided by Move. A vector is a homogenous",source:"@site/i18n/ja/docusaurus-plugin-content-docs/current/move/book/vector.md",sourceDirName:"move/book",slug:"/move/book/vector",permalink:"/move/book/vector",draft:!1,unlisted:!1,editUrl:"https://github.com/aptos-labs/developer-docs/edit/main/apps/docusaurus/docs/move/book/vector.md",tags:[],version:"current",lastUpdatedAt:1713276994,formattedLastUpdatedAt:"2024\u5e744\u670816\u65e5",frontMatter:{},sidebar:"appSidebar",previous:{title:"\u30a2\u30c9\u30ec\u30b9",permalink:"/move/book/address"},next:{title:"Signer",permalink:"/move/book/signer"}},o={},l=[{value:"Literals",id:"literals",level:2},{value:"General <code>vector</code> Literals",id:"general-vector-literals",level:3},{value:"Example Vector Literals",id:"example-vector-literals",level:4},{value:"<code>vector&lt;u8&gt;</code> literals",id:"vectoru8-literals",level:3},{value:"Byte Strings",id:"byte-strings",level:4},{value:"Hex Strings",id:"hex-strings",level:4},{value:"Example String Literals",id:"example-string-literals",level:4},{value:"Operations",id:"operations",level:2},{value:"Example",id:"example",level:2},{value:"Destroying and copying vectors",id:"destroying-and-copying-vectors",level:2},{value:"Ownership",id:"ownership",level:2}];function h(e){const r={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.h1,{id:"vector",children:"Vector"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"vector<T>"})," is the only primitive collection type provided by Move. A ",(0,s.jsx)(r.code,{children:"vector<T>"})," is a homogenous\ncollection of ",(0,s.jsx)(r.code,{children:"T"}),'\'s that can grow or shrink by pushing/popping values off the "end".']}),"\n",(0,s.jsxs)(r.p,{children:["A ",(0,s.jsx)(r.code,{children:"vector<T>"})," can be instantiated with any type ",(0,s.jsx)(r.code,{children:"T"}),". For example, ",(0,s.jsx)(r.code,{children:"vector<u64>"}),", ",(0,s.jsx)(r.code,{children:"vector<address>"}),",\n",(0,s.jsx)(r.code,{children:"vector<0x42::MyModule::MyResource>"}),", and ",(0,s.jsx)(r.code,{children:"vector<vector<u8>>"})," are all valid vector types."]}),"\n",(0,s.jsx)(r.h2,{id:"literals",children:"Literals"}),"\n",(0,s.jsxs)(r.h3,{id:"general-vector-literals",children:["General ",(0,s.jsx)(r.code,{children:"vector"})," Literals"]}),"\n",(0,s.jsxs)(r.p,{children:["Vectors of any type can be created with ",(0,s.jsx)(r.code,{children:"vector"})," literals."]}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Syntax"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector[]"})}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"vector[]: vector<T>"})," where ",(0,s.jsx)(r.code,{children:"T"})," is any single, non-reference type"]}),(0,s.jsx)(r.td,{children:"An empty vector"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector[e1, ..., en]"})}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"vector[e1, ..., en]: vector<T>"})," where ",(0,s.jsx)(r.code,{children:"e_i: T"})," s.t. ",(0,s.jsx)(r.code,{children:"0 < i <= n"})," and ",(0,s.jsx)(r.code,{children:"n > 0"})]}),(0,s.jsxs)(r.td,{children:["A vector with ",(0,s.jsx)(r.code,{children:"n"})," elements (of length ",(0,s.jsx)(r.code,{children:"n"}),")"]})]})]})]}),"\n",(0,s.jsxs)(r.p,{children:["In these cases, the type of the ",(0,s.jsx)(r.code,{children:"vector"})," is inferred, either from the element type or from the\nvector's usage. If the type cannot be inferred, or simply for added clarity, the type can be\nspecified explicitly:"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-move",children:"vector<T>[]: vector<T>\nvector<T>[e1, ..., en]: vector<T>\n"})}),"\n",(0,s.jsx)(r.h4,{id:"example-vector-literals",children:"Example Vector Literals"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-move",children:"(vector[]: vector<bool>);\n(vector[0u8, 1u8, 2u8]: vector<u8>);\n(vector<u128>[]: vector<u128>);\n(vector<address>[@0x42, @0x100]: vector<address>);\n"})}),"\n",(0,s.jsxs)(r.h3,{id:"vectoru8-literals",children:[(0,s.jsx)(r.code,{children:"vector<u8>"})," literals"]}),"\n",(0,s.jsxs)(r.p,{children:['A common use-case for vectors in Move is to represent "byte arrays", which are represented with\n',(0,s.jsx)(r.code,{children:"vector<u8>"}),". These values are often used for cryptographic purposes, such as a public key or a hash\nresult. These values are so common that specific syntax is provided to make the values more\nreadable, as opposed to having to use ",(0,s.jsx)(r.code,{children:"vector[]"})," where each individual ",(0,s.jsx)(r.code,{children:"u8"})," value is specified in\nnumeric form."]}),"\n",(0,s.jsxs)(r.p,{children:["There are currently two supported types of ",(0,s.jsx)(r.code,{children:"vector<u8>"})," literals, ",(0,s.jsx)(r.em,{children:"byte strings"})," and ",(0,s.jsx)(r.em,{children:"hex strings"}),"."]}),"\n",(0,s.jsx)(r.h4,{id:"byte-strings",children:"Byte Strings"}),"\n",(0,s.jsxs)(r.p,{children:["Byte strings are quoted string literals prefixed by a ",(0,s.jsx)(r.code,{children:"b"}),", e.g. ",(0,s.jsx)(r.code,{children:'b"Hello!\\n"'}),"."]}),"\n",(0,s.jsx)(r.p,{children:"These are ASCII encoded strings that allow for escape sequences. Currently, the supported escape\nsequences are:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Escape Sequence"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"\\n"})}),(0,s.jsx)(r.td,{children:"New line (or Line feed)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"\\r"})}),(0,s.jsx)(r.td,{children:"Carriage return"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"\\t"})}),(0,s.jsx)(r.td,{children:"Tab"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"\\\\"})}),(0,s.jsx)(r.td,{children:"Backslash"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"\\0"})}),(0,s.jsx)(r.td,{children:"Null"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:'\\"'})}),(0,s.jsx)(r.td,{children:"Quote"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"\\xHH"})}),(0,s.jsxs)(r.td,{children:["Hex escape, inserts the hex byte sequence ",(0,s.jsx)(r.code,{children:"HH"})]})]})]})]}),"\n",(0,s.jsx)(r.h4,{id:"hex-strings",children:"Hex Strings"}),"\n",(0,s.jsxs)(r.p,{children:["Hex strings are quoted string literals prefixed by a ",(0,s.jsx)(r.code,{children:"x"}),", e.g. ",(0,s.jsx)(r.code,{children:'x"48656C6C6F210A"'}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["Each byte pair, ranging from ",(0,s.jsx)(r.code,{children:"00"})," to ",(0,s.jsx)(r.code,{children:"FF"}),", is interpreted as hex encoded ",(0,s.jsx)(r.code,{children:"u8"})," value. So each byte\npair corresponds to a single entry in the resulting ",(0,s.jsx)(r.code,{children:"vector<u8>"}),"."]}),"\n",(0,s.jsx)(r.h4,{id:"example-string-literals",children:"Example String Literals"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-move",children:'script {\nfun byte_and_hex_strings() {\n    assert!(b"" == x"", 0);\n    assert!(b"Hello!\\n" == x"48656C6C6F210A", 1);\n    assert!(b"\\x48\\x65\\x6C\\x6C\\x6F\\x21\\x0A" == x"48656C6C6F210A", 2);\n    assert!(\n        b"\\"Hello\\tworld!\\"\\n \\r \\\\Null=\\0" ==\n            x"2248656C6C6F09776F726C6421220A200D205C4E756C6C3D00",\n        3\n    );\n}\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"operations",children:"Operations"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"vector"})," provides several operations via the ",(0,s.jsx)(r.code,{children:"std::vector"})," module in the Move standard\nlibrary, as shown below. More operations may be added over time.\nUp-to-date document on ",(0,s.jsx)(r.code,{children:"vector"})," can be found ",(0,s.jsx)(r.a,{href:"https://github.com/aptos-labs/aptos-core/blob/main/aptos-move/framework/move-stdlib/doc/vector.md#0x1_vector",children:"here"}),"."]}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Function"}),(0,s.jsx)(r.th,{children:"Description"}),(0,s.jsx)(r.th,{children:"Aborts?"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::empty<T>(): vector<T>"})}),(0,s.jsxs)(r.td,{children:["Create an empty vector that can store values of type ",(0,s.jsx)(r.code,{children:"T"})]}),(0,s.jsx)(r.td,{children:"Never"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::is_empty<T>(): bool"})}),(0,s.jsxs)(r.td,{children:["Return ",(0,s.jsx)(r.code,{children:"true"})," if the vector ",(0,s.jsx)(r.code,{children:"v"})," has no elements and ",(0,s.jsx)(r.code,{children:"false"})," otherwise."]}),(0,s.jsx)(r.td,{children:"Never"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::singleton<T>(t: T): vector<T>"})}),(0,s.jsxs)(r.td,{children:["Create a vector of size 1 containing ",(0,s.jsx)(r.code,{children:"t"})]}),(0,s.jsx)(r.td,{children:"Never"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::length<T>(v: &vector<T>): u64"})}),(0,s.jsxs)(r.td,{children:["Return the length of the vector ",(0,s.jsx)(r.code,{children:"v"})]}),(0,s.jsx)(r.td,{children:"Never"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::push_back<T>(v: &mut vector<T>, t: T)"})}),(0,s.jsxs)(r.td,{children:["Add ",(0,s.jsx)(r.code,{children:"t"})," to the end of ",(0,s.jsx)(r.code,{children:"v"})]}),(0,s.jsx)(r.td,{children:"Never"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::pop_back<T>(v: &mut vector<T>): T"})}),(0,s.jsxs)(r.td,{children:["Remove and return the last element in ",(0,s.jsx)(r.code,{children:"v"})]}),(0,s.jsxs)(r.td,{children:["If ",(0,s.jsx)(r.code,{children:"v"})," is empty"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::borrow<T>(v: &vector<T>, i: u64): &T"})}),(0,s.jsxs)(r.td,{children:["Return an immutable reference to the ",(0,s.jsx)(r.code,{children:"T"})," at index ",(0,s.jsx)(r.code,{children:"i"})]}),(0,s.jsxs)(r.td,{children:["If ",(0,s.jsx)(r.code,{children:"i"})," is not in bounds"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::borrow_mut<T>(v: &mut vector<T>, i: u64): &mut T"})}),(0,s.jsxs)(r.td,{children:["Return a mutable reference to the ",(0,s.jsx)(r.code,{children:"T"})," at index ",(0,s.jsx)(r.code,{children:"i"})]}),(0,s.jsxs)(r.td,{children:["If ",(0,s.jsx)(r.code,{children:"i"})," is not in bounds"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::destroy_empty<T>(v: vector<T>)"})}),(0,s.jsxs)(r.td,{children:["Delete ",(0,s.jsx)(r.code,{children:"v"})]}),(0,s.jsxs)(r.td,{children:["If ",(0,s.jsx)(r.code,{children:"v"})," is not empty"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::append<T>(v1: &mut vector<T>, v2: vector<T>)"})}),(0,s.jsxs)(r.td,{children:["Add the elements in ",(0,s.jsx)(r.code,{children:"v2"})," to the end of ",(0,s.jsx)(r.code,{children:"v1"})]}),(0,s.jsx)(r.td,{children:"Never"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::reverse_append<T>(lhs: &mut vector<T>, other: vector<T>)"})}),(0,s.jsxs)(r.td,{children:["Pushes all of the elements of the ",(0,s.jsx)(r.code,{children:"other"})," vector into the ",(0,s.jsx)(r.code,{children:"lhs"})," vector, in the reverse order as they occurred in ",(0,s.jsx)(r.code,{children:"other"})]}),(0,s.jsx)(r.td,{children:"Never"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::contains<T>(v: &vector<T>, e: &T): bool"})}),(0,s.jsxs)(r.td,{children:["Return true if ",(0,s.jsx)(r.code,{children:"e"})," is in the vector ",(0,s.jsx)(r.code,{children:"v"}),". Otherwise, returns false"]}),(0,s.jsx)(r.td,{children:"Never"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::swap<T>(v: &mut vector<T>, i: u64, j: u64)"})}),(0,s.jsxs)(r.td,{children:["Swaps the elements at the ",(0,s.jsx)(r.code,{children:"i"}),"th and ",(0,s.jsx)(r.code,{children:"j"}),"th indices in the vector ",(0,s.jsx)(r.code,{children:"v"})]}),(0,s.jsxs)(r.td,{children:["If ",(0,s.jsx)(r.code,{children:"i"})," or ",(0,s.jsx)(r.code,{children:"j"})," is out of bounds"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::reverse<T>(v: &mut vector<T>)"})}),(0,s.jsxs)(r.td,{children:["Reverses the order of the elements in the vector ",(0,s.jsx)(r.code,{children:"v"})," in place"]}),(0,s.jsx)(r.td,{children:"Never"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::reverse_slice<T>(v: &mut vector<T>, l: u64, r: u64)"})}),(0,s.jsxs)(r.td,{children:["Reverses the order of the elements ",(0,s.jsx)(r.code,{children:"[l, r)"})," in the vector ",(0,s.jsx)(r.code,{children:"v"})," in place"]}),(0,s.jsx)(r.td,{children:"Never"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::index_of<T>(v: &vector<T>, e: &T): (bool, u64)"})}),(0,s.jsxs)(r.td,{children:["Return ",(0,s.jsx)(r.code,{children:"(true, i)"})," if ",(0,s.jsx)(r.code,{children:"e"})," is in the vector ",(0,s.jsx)(r.code,{children:"v"})," at index ",(0,s.jsx)(r.code,{children:"i"}),". Otherwise, returns ",(0,s.jsx)(r.code,{children:"(false, 0)"})]}),(0,s.jsx)(r.td,{children:"Never"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::insert<T>(v: &mut vector<T>, i: u64, e: T)"})}),(0,s.jsxs)(r.td,{children:["Insert a new element ",(0,s.jsx)(r.code,{children:"e"})," at position ",(0,s.jsx)(r.code,{children:"0 <= i <= length"}),", using ",(0,s.jsx)(r.code,{children:"O(length - i)"})," time"]}),(0,s.jsxs)(r.td,{children:["If ",(0,s.jsx)(r.code,{children:"i"})," is out of bounds"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::remove<T>(v: &mut vector<T>, i: u64): T"})}),(0,s.jsxs)(r.td,{children:["Remove the ",(0,s.jsx)(r.code,{children:"i"}),"th element of the vector ",(0,s.jsx)(r.code,{children:"v"}),", shifting all subsequent elements. This is O(n) and preserves ordering of elements in the vector"]}),(0,s.jsxs)(r.td,{children:["If ",(0,s.jsx)(r.code,{children:"i"})," is out of bounds"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::swap_remove<T>(v: &mut vector<T>, i: u64): T"})}),(0,s.jsxs)(r.td,{children:["Swap the ",(0,s.jsx)(r.code,{children:"i"}),"th element of the vector ",(0,s.jsx)(r.code,{children:"v"})," with the last element and then pop the element, This is O(1), but does not preserve ordering of elements in the vector"]}),(0,s.jsxs)(r.td,{children:["If ",(0,s.jsx)(r.code,{children:"i"})," is out of bounds"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::trim<T>(v: &mut vector<T>, new_len: u64): u64"})}),(0,s.jsxs)(r.td,{children:["Trim the vector ",(0,s.jsx)(r.code,{children:"v"})," to the smaller size ",(0,s.jsx)(r.code,{children:"new_len"})," and return the evicted elements in order"]}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"new_len"})," is larger than the length of ",(0,s.jsx)(r.code,{children:"v"})]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::trim_reverse<T>(v: &mut vector<T>, new_len: u64): u64"})}),(0,s.jsxs)(r.td,{children:["Trim the vector ",(0,s.jsx)(r.code,{children:"v"})," to the smaller size ",(0,s.jsx)(r.code,{children:"new_len"})," and return the evicted elements in the reverse order"]}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"new_len"})," is larger than the length of ",(0,s.jsx)(r.code,{children:"v"})]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::rotate<T>(v: &mut vector<T>, rot: u64): u64"})}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"rotate(&mut [1, 2, 3, 4, 5], 2) -> [3, 4, 5, 1, 2]"})," in place, returns the split point ie. 3 in this example"]}),(0,s.jsx)(r.td,{children:"Never"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"vector::rotate_slice<T>(v: &mut vector<T>, left: u64, rot: u64, right: u64): u64"})}),(0,s.jsxs)(r.td,{children:["rotate a slice ",(0,s.jsx)(r.code,{children:"[left, right)"})," with ",(0,s.jsx)(r.code,{children:"left <= rot <= right"})," in place, returns the split point"]}),(0,s.jsx)(r.td,{children:"Never"})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-move",children:"use std::vector;\n\nlet v = vector::empty<u64>();\nvector::push_back(&mut v, 5);\nvector::push_back(&mut v, 6);\n\nassert!(*vector::borrow(&v, 0) == 5, 42);\nassert!(*vector::borrow(&v, 1) == 6, 42);\nassert!(vector::pop_back(&mut v) == 6, 42);\nassert!(vector::pop_back(&mut v) == 5, 42);\n"})}),"\n",(0,s.jsx)(r.h2,{id:"destroying-and-copying-vectors",children:"Destroying and copying vectors"}),"\n",(0,s.jsxs)(r.p,{children:["Some behaviors of ",(0,s.jsx)(r.code,{children:"vector<T>"})," depend on the abilities of the element type, ",(0,s.jsx)(r.code,{children:"T"}),". For example, vectors\ncontaining elements that do not have ",(0,s.jsx)(r.code,{children:"drop"})," cannot be implicitly discarded like ",(0,s.jsx)(r.code,{children:"v"})," in the example\nabove--they must be explicitly destroyed with ",(0,s.jsx)(r.code,{children:"vector::destroy_empty"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["Note that ",(0,s.jsx)(r.code,{children:"vector::destroy_empty"})," will abort at runtime unless ",(0,s.jsx)(r.code,{children:"vec"})," contains zero elements:"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-move",children:"fun destroy_any_vector<T>(vec: vector<T>) {\n    vector::destroy_empty(vec) // deleting this line will cause a compiler error\n}\n"})}),"\n",(0,s.jsxs)(r.p,{children:["But no error would occur for dropping a vector that contains elements with ",(0,s.jsx)(r.code,{children:"drop"}),":"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-move",children:"fun destroy_droppable_vector<T: drop>(vec: vector<T>) {\n    // valid!\n    // nothing needs to be done explicitly to destroy the vector\n}\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Similarly, vectors cannot be copied unless the element type has ",(0,s.jsx)(r.code,{children:"copy"}),". In other words, a\n",(0,s.jsx)(r.code,{children:"vector<T>"})," has ",(0,s.jsx)(r.code,{children:"copy"})," if and only if ",(0,s.jsx)(r.code,{children:"T"})," has ",(0,s.jsx)(r.code,{children:"copy"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["For more details see the sections on ",(0,s.jsx)(r.a,{href:"/move/book/abilities",children:"type abilities"})," and ",(0,s.jsx)(r.a,{href:"/move/book/generics",children:"generics"}),"."]}),"\n",(0,s.jsx)(r.h2,{id:"ownership",children:"Ownership"}),"\n",(0,s.jsxs)(r.p,{children:["As mentioned ",(0,s.jsx)(r.a,{href:"#destroying-and-copying-vectors",children:"above"}),", ",(0,s.jsx)(r.code,{children:"vector"})," values can be copied only if the\nelements can be copied."]})]})}function x(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},83581:(e,r,t)=>{t.d(r,{R:()=>d,x:()=>i});var s=t(11855);const n={},c=s.createContext(n);function d(e){const r=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),s.createElement(c.Provider,{value:r},e.children)}}}]);